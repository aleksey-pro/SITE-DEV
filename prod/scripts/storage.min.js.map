{"version":3,"names":[],"mappings":"","sources":["storage.js"],"sourcesContent":["if (typeof window.localStorage == 'undefined' || typeof window.sessionStorage == 'undefined') (function () {\r\n  \r\n  var Storage = function (type) {\r\n    function createCookie(name, value, days) {\r\n      var date, expires;\r\n      \r\n      if (days) {\r\n        date = new Date();\r\n        date.setTime(date.getTime()+(days*24*60*60*1000));\r\n        expires = \"; expires=\"+date.toGMTString();\r\n      } else {\r\n        expires = \"\";\r\n      }\r\n      document.cookie = name+\"=\"+value+expires+\"; path=/\";\r\n    }\r\n    \r\n    function readCookie(name) {\r\n      var nameEQ = name + \"=\",\r\n        ca = document.cookie.split(';'),\r\n        i, c;\r\n      \r\n      for (i=0; i < ca.length; i++) {\r\n        c = ca[i];\r\n        while (c.charAt(0)==' ') {\r\n          c = c.substring(1,c.length);\r\n        }\r\n        \r\n        if (c.indexOf(nameEQ) == 0) {\r\n          return c.substring(nameEQ.length,c.length);\r\n        }\r\n      }\r\n      return null;\r\n    }\r\n    \r\n    function setData(data) {\r\n      data = JSON.stringify(data);\r\n      if (type == 'session') {\r\n        window.name = data;\r\n      } else {\r\n        createCookie('localStorage', data, 365);\r\n      }\r\n    }\r\n    \r\n    function clearData() {\r\n      if (type == 'session') {\r\n        window.name = '';\r\n      } else {\r\n        createCookie('localStorage', '', 365);\r\n      }\r\n    }\r\n    \r\n    function getData() {\r\n      var data = type == 'session' ? window.name : readCookie('localStorage');\r\n      return data ? JSON.parse(data) : {};\r\n    }\r\n    \r\n    \r\n    // initialise if there's already data\r\n    var data = getData();\r\n    \r\n    return {\r\n      length: 0,\r\n      clear: function () {\r\n        data = {};\r\n        this.length = 0;\r\n        clearData();\r\n      },\r\n      getItem: function (key) {\r\n        return data[key] === undefined ? null : data[key];\r\n      },\r\n      key: function (i) {\r\n        // not perfect, but works\r\n        var ctr = 0;\r\n        for (var k in data) {\r\n          if (ctr == i) return k;\r\n          else ctr++;\r\n        }\r\n        return null;\r\n      },\r\n      removeItem: function (key) {\r\n        delete data[key];\r\n        this.length--;\r\n        setData(data);\r\n      },\r\n      setItem: function (key, value) {\r\n        data[key] = value+''; // forces the value to a string\r\n        this.length++;\r\n        setData(data);\r\n      }\r\n    };\r\n  };\r\n  \r\n  if (typeof window.localStorage == 'undefined') window.localStorage = new Storage('local');\r\n  if (typeof window.sessionStorage == 'undefined') window.sessionStorage = new Storage('session');\r\n  \r\n})();\r\n"],"file":"storage.min.js","sourceRoot":"/source/"}