{"version":3,"sources":["storage.js"],"names":["window","localStorage","sessionStorage","Storage","type","createCookie","name","value","days","date","expires","Date","setTime","getTime","toGMTString","document","cookie","readCookie","i","c","nameEQ","ca","split","length","charAt","substring","indexOf","setData","data","JSON","stringify","clearData","getData","parse","clear","this","getItem","key","undefined","ctr","k","removeItem","setItem"],"mappings":"AAAkC,mBAAvBA,QAAOC,cAA+D,mBAAzBD,QAAOE,gBAA+B,WAE5F,GAAIC,GAAU,SAAUC,GACtB,QAASC,GAAaC,EAAMC,EAAOC,GACjC,GAAIC,GAAMC,CAENF,IACFC,EAAO,GAAIE,MACXF,EAAKG,QAAQH,EAAKI,UAAgB,GAALL,EAAQ,GAAG,GAAG,KAC3CE,EAAU,aAAaD,EAAKK,eAE5BJ,EAAU,GAEZK,SAASC,OAASV,EAAK,IAAIC,EAAMG,EAAQ,WAG3C,QAASO,GAAWX,GAClB,GAEEY,GAAGC,EAFDC,EAASd,EAAO,IAClBe,EAAKN,SAASC,OAAOM,MAAM,IAG7B,KAAKJ,EAAE,EAAGA,EAAIG,EAAGE,OAAQL,IAAK,CAE5B,IADAC,EAAIE,EAAGH,GACa,KAAbC,EAAEK,OAAO,IACdL,EAAIA,EAAEM,UAAU,EAAEN,EAAEI,OAGtB,IAAyB,GAArBJ,EAAEO,QAAQN,GACZ,MAAOD,GAAEM,UAAUL,EAAOG,OAAOJ,EAAEI,QAGvC,MAAO,MAGT,QAASI,GAAQC,GACfA,EAAOC,KAAKC,UAAUF,GACV,WAARxB,EACFJ,OAAOM,KAAOsB,EAEdvB,EAAa,eAAgBuB,EAAM,KAIvC,QAASG,KACK,WAAR3B,EACFJ,OAAOM,KAAO,GAEdD,EAAa,eAAgB,GAAI,KAIrC,QAAS2B,KACP,GAAIJ,GAAe,WAARxB,EAAoBJ,OAAOM,KAAOW,EAAW,eACxD,OAAOW,GAAOC,KAAKI,MAAML,MAK3B,GAAIA,GAAOI,GAEX,QACET,OAAQ,EACRW,MAAO,WACLN,KACAO,KAAKZ,OAAS,EACdQ,KAEFK,QAAS,SAAUC,GACjB,MAAqBC,UAAdV,EAAKS,GAAqB,KAAOT,EAAKS,IAE/CA,IAAK,SAAUnB,GAEb,GAAIqB,GAAM,CACV,KAAK,GAAIC,KAAKZ,GAAM,CAClB,GAAIW,GAAOrB,EAAG,MAAOsB,EAChBD,KAEP,MAAO,OAETE,WAAY,SAAUJ,SACbT,GAAKS,GACZF,KAAKZ,SACLI,EAAQC,IAEVc,QAAS,SAAUL,EAAK9B,GACtBqB,EAAKS,GAAO9B,EAAM,GAClB4B,KAAKZ,SACLI,EAAQC,KAKoB,oBAAvB5B,QAAOC,eAA6BD,OAAOC,aAAe,GAAIE,GAAQ,UAC7C,mBAAzBH,QAAOE,iBAA+BF,OAAOE,eAAiB,GAAIC,GAAQ","file":"storage.min.js","sourcesContent":["if (typeof window.localStorage == 'undefined' || typeof window.sessionStorage == 'undefined') (function () {\r\n  \r\n  var Storage = function (type) {\r\n    function createCookie(name, value, days) {\r\n      var date, expires;\r\n      \r\n      if (days) {\r\n        date = new Date();\r\n        date.setTime(date.getTime()+(days*24*60*60*1000));\r\n        expires = \"; expires=\"+date.toGMTString();\r\n      } else {\r\n        expires = \"\";\r\n      }\r\n      document.cookie = name+\"=\"+value+expires+\"; path=/\";\r\n    }\r\n    \r\n    function readCookie(name) {\r\n      var nameEQ = name + \"=\",\r\n        ca = document.cookie.split(';'),\r\n        i, c;\r\n      \r\n      for (i=0; i < ca.length; i++) {\r\n        c = ca[i];\r\n        while (c.charAt(0)==' ') {\r\n          c = c.substring(1,c.length);\r\n        }\r\n        \r\n        if (c.indexOf(nameEQ) == 0) {\r\n          return c.substring(nameEQ.length,c.length);\r\n        }\r\n      }\r\n      return null;\r\n    }\r\n    \r\n    function setData(data) {\r\n      data = JSON.stringify(data);\r\n      if (type == 'session') {\r\n        window.name = data;\r\n      } else {\r\n        createCookie('localStorage', data, 365);\r\n      }\r\n    }\r\n    \r\n    function clearData() {\r\n      if (type == 'session') {\r\n        window.name = '';\r\n      } else {\r\n        createCookie('localStorage', '', 365);\r\n      }\r\n    }\r\n    \r\n    function getData() {\r\n      var data = type == 'session' ? window.name : readCookie('localStorage');\r\n      return data ? JSON.parse(data) : {};\r\n    }\r\n    \r\n    \r\n    // initialise if there's already data\r\n    var data = getData();\r\n    \r\n    return {\r\n      length: 0,\r\n      clear: function () {\r\n        data = {};\r\n        this.length = 0;\r\n        clearData();\r\n      },\r\n      getItem: function (key) {\r\n        return data[key] === undefined ? null : data[key];\r\n      },\r\n      key: function (i) {\r\n        // not perfect, but works\r\n        var ctr = 0;\r\n        for (var k in data) {\r\n          if (ctr == i) return k;\r\n          else ctr++;\r\n        }\r\n        return null;\r\n      },\r\n      removeItem: function (key) {\r\n        delete data[key];\r\n        this.length--;\r\n        setData(data);\r\n      },\r\n      setItem: function (key, value) {\r\n        data[key] = value+''; // forces the value to a string\r\n        this.length++;\r\n        setData(data);\r\n      }\r\n    };\r\n  };\r\n  \r\n  if (typeof window.localStorage == 'undefined') window.localStorage = new Storage('local');\r\n  if (typeof window.sessionStorage == 'undefined') window.sessionStorage = new Storage('session');\r\n  \r\n})();\r\n"],"sourceRoot":"/source/"}